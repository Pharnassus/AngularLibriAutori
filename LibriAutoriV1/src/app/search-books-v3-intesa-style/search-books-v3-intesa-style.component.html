<nav-intesa-sanpaolo></nav-intesa-sanpaolo>

<ng-container *ngIf="userSession">

  <!-- form per la ricerca dei libri -->
  <section id="m_formSearchBooksV3">
    <form class="m_searchForm row col-sm-8 g-3 needs-validation" novalidate>

      <!-- barra input -->
      <div class="m_inputSearchContainer form-floating mb-3">

        <input type="text" id="m_searchBook" class="form-control" placeholder="search by genre" maxlength="40"
          [(ngModel)]="searchBookInput" [ngModelOptions]="{standalone: true}" (click)="inputFunctionFocus()" required>

        <label id="m_labelError" for="m_searchBook">Start your search</label>

        <!-- pulsante di ricerca -->
        <div id="m_searchSpinnerContainer">
          <button type="submit" class="btn btn-primary" (click)="searchBookFunction()">
            <i class="fas fa-search" *ngIf="spinner == false"></i>
            <!-- sostituzione spinner con il component -->
            <ng-container *ngIf="spinner">
              <minispinner></minispinner>
            </ng-container>
          </button>
        </div>

      </div>
    </form>
  </section>

  <!-- accordeon -->
  <ng-container *ngIf="cardsShow">
    <div id="m_intesaAccordeonContainer">

      <ng-container *ngFor="let item of arrayBooks">

        <div class="m_contentAccordeon">
          <ng-container *ngIf="accordeonVisibility == false">
            <div class="m_headerAccordeon">
              <h4 (click)="accordeonFunction(item)">{{item.author.name}}</h4>
              <i class="fas fa-chevron-circle-down" *ngIf="accordeonVisibility == false"></i>
            </div>
          </ng-container>
        </div>
      </ng-container>

      <ng-container *ngIf="accordeonVisibility">
        <ng-container *ngFor="let item of accordeonBookArray">
          <div class="m_contentAccordeon">
            <div class="m_headerAccordeon">
              <h4 (click)="accordeonFunction(item)">{{item.author.name}}</h4>
              <i class="fas fa-chevron-circle-up" *ngIf="accordeonVisibility" (click)="exitAccordeonFunction()"></i>
            </div>
            <div class="m_mainAccordeon">
              <p>compleanno: </p><strong>{{item.author.birthDate}}</strong>
              <p>genere: </p><strong>{{item.author.gender}}</strong>
              <p><strong>awards</strong></p>
              <p>awards: </p>
              <p>awards: </p>
              <p>awards: </p>
              <p>awards: </p>
              <p><strong>books</strong></p>
              <p>book.name: </p>
              <p>genre: </p>
              <p>year: </p>
            </div>
          </div>
        </ng-container>
      </ng-container>


    </div>
  </ng-container>
  <!-- /accordeon -->

</ng-container>

<!-- modal libri -->
<ng-container *ngIf="modalVisibility">

  <!-- contenitore per il flex -->
  <section id="m_modalContainer">
    <!-- contenitore responsive -->
    <div id="m_modal" class="row col-sm-8 g-3">

      <!-- parte sinistra del modal -->
      <div class="m_leftSideModal">
        <ng-container *ngFor="let item of modalBookArray">

          <div class="m_modalInfos">
            <div class="m_modalInfosType">
              <p>Title</p>
            </div>
            <div class="m_modalInfosContent">
              <strong>{{item.name}}</strong>
            </div>
          </div>

          <div class="m_modalInfos">
            <div class="m_modalInfosType">
              <p>ISBN</p>
            </div>
            <div class="m_modalInfosContent">
              <strong>{{item.isbn}}</strong>
            </div>
          </div>

          <div class="m_modalInfos">
            <div class="m_modalInfosType">
              <p>Genre</p>
            </div>
            <div class="m_modalInfosContent">
              <strong>{{item.genre}}</strong>
            </div>
          </div>

          <div class="m_modalInfos">
            <div class="m_modalInfosType">
              <p>Publish Date</p>
            </div>
            <div class="m_modalInfosContent">
              <strong>{{item.publish_date}}</strong>
            </div>
          </div>

          <div class="m_modalInfos">
            <div class="m_modalInfosType">
              <p>Description</p>
            </div>
            <div class="m_modalInfosContent">
              <strong>{{item.description}}</strong>
            </div>
          </div>

        </ng-container>
      </div>

      <!-- parte destra del modal -->
      <div class="m_rightSideModal">
        <div class="m_exit" (click)="exitModal()">
          <i class="far fa-times-circle"></i>
        </div>

        <ng-container *ngFor="let item of modalBookArray">
          <div class="m_posterContainer">
            <img [src]="item.poster" alt="Poster">
          </div>
        </ng-container>
      </div>

    </div>
  </section>

</ng-container>
